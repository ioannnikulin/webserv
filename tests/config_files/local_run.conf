server {
    listen 127.0.0.1:8888;
    server_name localhost;

    error_page 404 ./tests/e2e/10_demo/requirements/webserv/volume/folder/errors/404.html;

    location / {
        methods GET;
        root tests/e2e/10_demo/requirements/webserv/volume;
        index index.html;
    }

    location /listme {
        methods GET;
        root tests/e2e/10_demo/requirements/webserv/volume;
		autoindex on;
    }

	location /dontlistme {
        methods GET;
        root tests/e2e/10_demo/requirements/webserv/volume/dontlistme;
    }

    location /folder {
        methods GET POST DELETE;
        root tests/e2e/10_demo/requirements/webserv/volume/folder;
        autoindex on;
		client_max_body_size 1M;
        upload on tests/e2e/10_demo/requirements/webserv/volume/folder;
    }

    location /internal_redirect {
        return http://127.0.0.1:8888/listme;
    }

    location /relative_redirect {
        return /listme;
    }

    location /nowhere {
        return /doesntexist;
    }

	location /cgi {
		methods GET;
        root tests/e2e/10_demo/requirements/webserv/volume/cgi;
        index index.py;
    }

    cgi .py /usr/bin/python3;
    cgi .php /usr/bin/php-cgi;

    location /set_light {
        methods GET;
    }

    location /set_dark {
        methods GET;
    }
}

server {
    listen 127.0.0.1:8887;

	location / {
        methods GET;
        root tests/e2e/10_demo/requirements/webserv/volume;
        index index.html;
    }

	location /external_redirect {
        methods POST;
        return https://google.com;
    }
}
